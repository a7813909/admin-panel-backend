datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

// === ENUMS ===
enum Role {
  USER
  EMPLOYEE
  ADMIN
}

// === –°–£–©–ù–û–°–¢–ò –î–õ–Ø –°–í–Ø–ó–ï–ô ===

// 1. –û–¢–î–ï–õ–´ (Departament)
model Departament {
  id        String   @id @default(uuid())
  name      String   @unique
  employees User[] 
   // –î–æ–±–∞–≤–ª—è–µ–º –ø–æ–ª—è –¥–ª—è –∏–µ—Ä–∞—Ä—Ö–∏–∏:
      parentId    String?       // ID —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ (–º–æ–∂–µ—Ç –±—ã—Ç—å NULL –¥–ª—è –∫–æ—Ä–Ω–µ–≤—ã—Ö –æ—Ç–¥–µ–ª–æ–≤)
      parent      Departament?  @relation("SubDepartments", fields: [parentId], references: [id], onDelete: SetNull) // –°–≤—è–∑—å —Å —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–∏–º –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–º
      subDepartments Departament[] @relation("SubDepartments") // –°–≤—è–∑—å —Å –¥–æ—á–µ—Ä–Ω–∏–º–∏ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞–º–∏

      createdAt   DateTime      @default(now())
      updatedAt   DateTime      @updatedAt
}



// === –û–°–ù–û–í–ù–ê–Ø –°–£–©–ù–û–°–¢–¨ ===
model User {
  id                String       @id @default(uuid())
  email             String       @unique
  password          String      
  name              String
  // üéØ –†–æ–ª–∏ –∏ –û—Ç–¥–µ–ª—ã
  role              Role         @default(USER) 
  departamentId     String
  departament       Departament? @relation(fields: [departamentId], references: [id])
  
  createdAt         DateTime     @default(now())
  updatedAt         DateTime     @updatedAt
}
