datasource db {
  provider = "postgresql"
  //url      = env("DATABASE_URL")
}

generator client {
  provider = "prisma-client-js"
}

// === ENUMS ===
enum Role {
  USER
  EMPLOYEE
  ADMIN
}

// === –°–£–©–ù–û–°–¢–ò –î–õ–Ø –°–í–Ø–ó–ï–ô ===

// 1. –û–¢–î–ï–õ–´ (Departament)
model Departament {
  id        String   @id @default(uuid())
  name      String   @unique  // –ò–º—è –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞ —É–Ω–∏–∫–∞–ª—å–Ω–æ
  employees User[] 
  
  // !!! –í–û–¢ –ó–î–ï–°–¨ –ò–ó–ú–ï–ù–ï–ù–ò–Ø –î–õ–Ø –ü–†–ê–í–ò–õ–¨–ù–û–ô –ò–ï–†–ê–†–•–ò–ò !!!
  // parentId - —ç—Ç–æ —Å–∞–º–æ –ø–æ–ª–µ, –∫–æ—Ç–æ—Ä–æ–µ —Ö—Ä–∞–Ω–∏—Ç ID —Ä–æ–¥–∏—Ç–µ–ª—è
  parentId  String?   // –ú–æ–∂–µ—Ç –±—ã—Ç—å null (–¥–ª—è –∫–æ—Ä–Ω–µ–≤—ã—Ö –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤)
  // parent - —ç—Ç–æ –≤–∏—Ä—Ç—É–∞–ª—å–Ω–æ–µ –ø–æ–ª–µ, –∫–æ—Ç–æ—Ä–æ–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –ø–æ–ª—É—á–∏—Ç—å –æ–±—ä–µ–∫—Ç —Ä–æ–¥–∏—Ç–µ–ª—å—Å–∫–æ–≥–æ –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–∞
  parent    Departament? @relation("SubDepartments", fields: [parentId], references: [id], onDelete: SetNull) 
  // subDepartments - —ç—Ç–æ —Å–ø–∏—Å–æ–∫ –¥–æ—á–µ—Ä–Ω–∏—Ö –¥–µ–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç–æ–≤
  subDepartments Departament[] @relation("SubDepartments") 
  // !!! –ö–û–ù–ï–¶ –ò–ó–ú–ï–ù–ï–ù–ò–ô –î–õ–Ø –ü–†–ê–í–ò–õ–¨–ù–û–ô –ò–ï–†–ê–†–•–ò–ò !!!

  createdAt   DateTime @default(now()) // –°—Ç–∞–≤—å @default(now()) –∏ @updatedAt –≤ –∫–æ–Ω–µ—Ü –º–æ–¥–µ–ª–∏
  updatedAt   DateTime @default(now()) 
}




// === –û–°–ù–û–í–ù–ê–Ø –°–£–©–ù–û–°–¢–¨ ===
model User {
  id                String       @id @default(uuid())
  email             String       @unique
  password          String      
  name              String
  // üéØ –†–æ–ª–∏ –∏ –û—Ç–¥–µ–ª—ã
  role              Role         @default(USER) 
  departamentId     String 
  departament       Departament @relation(fields: [departamentId], references: [id])
  
  createdAt         DateTime     @default(now())
  updatedAt   DateTime @default(now())
}
